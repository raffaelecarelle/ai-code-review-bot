<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Configuration • AI Code Review Bot</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
<header class="header">
  <div class="container header-inner">
    <a class="brand" href="./"><img src="assets/logo.png" alt="" /><span>AI Code Review Bot</span></a>
    <nav class="nav">
      <a href="getting-started.html">Quick Start</a>
      <a href="configuration.html">Configuration</a>
      <a href="vcs-adapters.html">VCS Adapters</a>
      <a href="providers.html">AI Providers</a>
      <a href="cli.html">CLI</a>
      <a href="development.html">Development</a>
      <a href="faq.html">FAQ</a>
    </nav>
  </div>
</header>
<main class="main container content">
  <aside class="sidebar">
    <h3>On this page</h3>
    <a href="#file">Config file format</a>
    <a href="#example">Full example</a>
    <a href="#excludes">Excludes</a>
    <a href="#env">Environment variables</a>
    <a href="#notes">Notes</a>
  </aside>
  <article class="article">
    <h1>Configuration (.aicodereview.yml)</h1>
    <p>The tool loads configuration from <code>.aicodereview.yml</code> (YAML) or JSON. You can also provide a custom path with <code>--config</code>.</p>

    <h2 id="file">Config file format</h2>
    <p>Top-level sections:</p>
    <ul>
      <li><code>version</code> – config schema version</li>
      <li><code>providers</code> – default provider and provider-specific settings</li>
      <li><code>context</code> – token budget and overflow handling</li>
      <li><code>policy</code> – commenting thresholds and redaction</li>
      <li><code>guidelines_file</code> – optional path to coding guidelines file</li>
      <li><code>vcs</code> – platform and identifiers to resolve diffs by <code>--id</code></li>
      <li><code>prompts</code> – optional extra instructions appended to base prompts</li>
      <li><code>excludes</code> – array of paths to exclude from code review</li>
    </ul>

    <h2 id="example">Full example</h2>
    <pre><code>version: 1
providers:
  # Safe deterministic provider by default
  default: mock
context:
  diff_token_limit: 8000
  overflow_strategy: trim
  per_file_token_cap: 2000
policy:
  min_severity_to_comment: info
  max_comments: 50
  allow_suggested_fixes: true
  redact_secrets: true
guidelines_file: null
vcs:
  # Choose which platform to use when computing diffs via git and posting comments
  # Allowed values: github | gitlab | bitbucket
  platform: null

  # Repository identifier: "owner/repository_name" (GitHub), "namespace" (GitLab), "workspace/repository_name" (Bitbucket)
  repository: null
  # Gitlab Project ID
  project_id: null
  # Authentication token (falls back to env vars: AICR_TOKEN, then platform-specific tokens)
  access_token: null
  # API base URL (defaults to platform standard, override for self-hosted instances)
  api_base: null
  # HTTP timeout in seconds
  timeout: 30
prompts:
  system_append: "Prefer concise findings and avoid duplicates."
  user_append:
    - "Prioritize security and performance related issues."
  extra:
    - "If a secret or key is detected, suggest redaction."
excludes:
  # Array of paths to exclude from code review
  # Each element is treated as glob, regex, or relative path from project root
  - "*.md"           # Exclude all markdown files (glob)
  - "composer.lock"  # Exclude specific files (exact match)
  - "tests/*.php"    # Exclude files in specific directories with patterns (glob)
  - "vendor"         # Exclude entire vendor directory (directory)
  - "node_modules"   # Exclude node_modules directory (directory)
  - "build"          # Exclude build artifacts (directory)
  - "dist"           # Exclude distribution files (directory)
</code></pre>

    <h2 id="excludes">Excludes</h2>
    <p>The <code>excludes</code> configuration allows you to specify files and directories to exclude from code review. Each element in the array is treated as a glob pattern, regex, or relative path from the project root.</p>
    
    <h3>Pattern Types</h3>
    <ul>
      <li><strong>Glob patterns</strong> – Use wildcards like <code>*.md</code>, <code>tests/*.php</code>, or <code>**/*.json</code></li>
      <li><strong>Exact matches</strong> – Specify exact file names like <code>composer.lock</code> or <code>package.json</code></li>
      <li><strong>Directory patterns</strong> – Exclude entire directories like <code>vendor</code>, <code>node_modules</code>, or <code>build</code></li>
    </ul>

    <h3>Common Examples</h3>
    <ul>
      <li><code>"*.md"</code> – Excludes all markdown files</li>
      <li><code>"vendor"</code> – Excludes the entire vendor directory and all its contents</li>
      <li><code>"tests/*.php"</code> – Excludes all PHP files in the tests directory</li>
      <li><code>"composer.lock"</code> – Excludes the specific composer.lock file</li>
      <li><code>"build"</code>, <code>"dist"</code>, <code>"node_modules"</code> – Excludes common build/dependency directories</li>
    </ul>

    <h2 id="notes">Notes</h2>
    <ul>
      <li>The default AI provider is <code>mock</code>; no network calls occur until you configure a real provider.</li>
      <li>When <code>guidelines_file</code> is set, its contents are base64-embedded in the prompt for all providers.</li>
      <li>Commenting back to PR/MR happens only when you pass <code>--comment</code> to the CLI.</li>
    </ul>
  </article>
</main>
<footer class="footer"><div class="container footer-inner"><div>© 2025 AI Code Review Bot</div><div><a href="./">Home</a></div></div></footer>
</body>
</html>
